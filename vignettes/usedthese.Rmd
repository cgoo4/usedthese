---
title: "usedthese"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{usedthese}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

In the example below, `tribble` is counted once against the (originating) tibble package even though it is also loaded by dplyr. And `used_here()` assumes a loaded function in rather than a base function of the same name, so `dplyr::filter`, for example, is counted rather than `stats::filter`.

Without `exclude = "first"`, `first` would be shown as package `NA` since `used_here()` would not know if the intent was `xts::first` or `dplyr::first`. Adding an `exclude` (or `include.only`), argument to `library(xts)`, assuming it's needed for other functions when further coded is later added, makes this clear.

The rendered table is assigned the CSS class `.usedthese` to help other `used_*` functions find and aggregate multiple tables across one or more websites.

```{r setup}
options(tidyverse.quiet = TRUE)
library(tidyverse) 
library(usedthese)
library(xts, exclude = "first")

tribble(~group, ~a1, ~a2, ~b1,
        "x", 1, 2, 3,
        "x", 4, 5, 6,
        "y", 7, 8, 9) |> 
  select(-starts_with("b")) |> 
  filter(group == "x") |> 
  mutate(first_a1 = first(a1))

used_here()
```
