---
title: "Getting Started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{usedthese}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Introduction

The overall goal of usedthese is to:

1.  With `used_here()`, make it super easy to add a nicely-rendered summary table of R package & function usage, consistent with knitr's syntax highlighting, to the foot of a rendered Quarto or R Markdown document. [Development version available.]

2.  With `used_there()`, harvest multiple such tables to create an overall summary of usage for your website. [Statement of future intent.]

3.  With `used_elsewhere()`, websites deploying the usedthese package, and where the owners have explicitly chosen to add their website url to a participation list, may be analysed for a broader view of package & function usage. [Statement of future intent.]

4.  With `used_where(),` for a supplied specific function example use cases may be found from websites participating per 3. [Statement of future intent.]

## An Example Site

Each "little project" on [quantumjitter.com](https://www.quantumjitter.com/project/) focuses on a data science technique or machine learning model to analyse real-world data. At the foot of each of these is a concise quantified view of the R packages and functions used in the associated code. This is achieved by including `used_here()` in each Quarto document.

`used_there()` harvests all the tables created by `used_here()` to enable a [Favourite Things](https://www.quantumjitter.com/project/box/) view of how R packages and functions are used right across quantumjitter.com.

## Installation

The usedthese package is currently in active development and not yet available on CRAN. The latest version may be downloaded here:

```{r eval=FALSE}
# install.packages("devtools")
devtools::install_github("cgoo4/usedthese")
```

## Worked Example

`used_here()` considers 4 inputs:

1.  The names of packages loaded with `library()`;

2.  The functions used by these loaded packages;

3.  The originating package name if a function is imported;

4.  The functions syntax highlighted in the rendered Quarto document.

In the example below, `tribble` is counted once against the (originating) tibble package even though it is also loaded by dplyr. And `used_here()` assumes a loaded function is used in preference to a base function of the same name, for example, `dplyr::filter` rather than `stats::filter`.

Without `exclude = "first"`, `first` would be assigned to package `NA` as `used_here()` would not know if the intent was `xts::first` or `dplyr::first`. Adding an `exclude` (or `include.only`), argument to `library(xts)`, assuming it's needed for other functions when further coded is later added, makes this clear.

The rendered table is assigned the CSS class `.usedthese` to help other `used_*` functions find and aggregate multiple tables across one or more websites.

```{r setup}
options(tidyverse.quiet = TRUE)
library(tidyverse) 
library(usedthese)
library(xts, exclude = "first")

tribble(~group, ~a1, ~a2, ~b1,
        "x", 1, 2, 3,
        "x", 4, 5, 6,
        "y", 7, 8, 9) |> 
  select(-starts_with("b")) |> 
  filter(group == "x") |> 
  mutate(first_a1 = first(a1))

used_here()
```
