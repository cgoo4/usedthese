---
title: "usedthese"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{usedthese}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Worked Example

`used_here()` considers 4 inputs:

1.  The names of packages loaded with `library()`;

2.  The functions used by these loaded packages;

3.  The originating package name if a function is imported;

4.  The functions syntax highlighted in the rendered Quarto document.

In the example below, `tribble` is counted once against the (originating) tibble package even though it is also loaded by dplyr. And `used_here()` assumes a loaded function is used in preference to a base function of the same name, for example, `dplyr::filter` rather than `stats::filter`.

Without `exclude = "first"`, `first` would be assigned to package `NA` as `used_here()` would not know if the intent was `xts::first` or `dplyr::first`. Adding an `exclude` (or `include.only`), argument to `library(xts)`, assuming it's needed for other functions when further coded is later added, makes this clear.

The rendered table is assigned the CSS class `.usedthese` to help other `used_*` functions find and aggregate multiple tables across one or more websites.

```{r setup}
options(tidyverse.quiet = TRUE)
library(tidyverse) 
library(usedthese)
library(xts, exclude = "first")

tribble(~group, ~a1, ~a2, ~b1,
        "x", 1, 2, 3,
        "x", 4, 5, 6,
        "y", 7, 8, 9) |> 
  select(-starts_with("b")) |> 
  filter(group == "x") |> 
  mutate(first_a1 = first(a1))

used_here()
```
